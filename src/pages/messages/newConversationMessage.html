<ion-header>
    <ion-navbar>
        <button ion-button menuToggle id="pleaseshowup">
            <ion-icon name="menu"></ion-icon>
        </button>
        <ion-title>New Message to {{ person.firstName }} {{ person.lastName }}</ion-title>
    </ion-navbar>
</ion-header>

<ion-content>
    <div *ngFor="let message of messages; let last = last">

        <ion-card class="sending" *ngIf="message.sender == userId">
            <ion-card-content class="cardContent">
                {{ message.message }}
            </ion-card-content>
        </ion-card>

        <ion-card class="receiving" *ngIf="message.sender == person.id">
            <ion-card-content class="cardContent">
                {{ message.message }}
            </ion-card-content>
        </ion-card>


        {{ (last && needToScrollToBottom()) ? scrollToBottom(0) : ''}}

    </div>
</ion-content>

<ion-footer>
    <ion-toolbar>
        <form (ngSubmit)="sendMessage()">
            <ion-item class="message-item">
                <ion-input [(ngModel)]="typedMessage" class="messageInput" name="message" type="text" placeholder=Message value=""></ion-input>
            </ion-item>
            <button ion-fab mini icon-only class="enterButton" type="submit">
                <ion-icon name="arrow-forward" round></ion-icon>
            </button>
        </form>
    </ion-toolbar>
</ion-footer>
